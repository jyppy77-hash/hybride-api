<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, interactive-widget=resizes-content">
    <title>Generateur de Grilles EuroMillions IA - Analyse Statistique | LotoIA</title>
    <meta name="description" content="Generez des grilles EuroMillions optimisees grace au moteur HYBRIDE. Analyse de tirages historiques pour des combinaisons statistiquement equilibrees.">
    <meta name="keywords" content="generateur euromillions, grille euromillions IA, moteur HYBRIDE, HYBRIDE, analyse statistique euromillions, numeros euromillions, etoiles euromillions">
    <link rel="canonical" href="https://lotoia.fr/euromillions/generateur">
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="LotoIA">
    <meta property="og:locale" content="fr_FR">
    <meta property="og:title" content="Generateur de Grilles EuroMillions IA | LotoIA">
    <meta property="og:description" content="Generez des grilles EuroMillions optimisees avec le moteur HYBRIDE. Analyse de tirages historiques depuis 2019.">
    <meta property="og:url" content="https://lotoia.fr/euromillions/generateur">
    <meta property="og:image" content="https://lotoia.fr/static/og-image.jpg">
    <meta property="og:image:secure_url" content="https://lotoia.fr/static/og-image.jpg">
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Generateur de Grilles EuroMillions IA | LotoIA">
    <meta name="twitter:description" content="Generez des grilles EuroMillions optimisees avec le moteur HYBRIDE. Analyse de tirages historiques depuis 2019.">
    <meta name="twitter:image" content="https://lotoia.fr/static/og-image.jpg">
    <!-- JSON-LD Schema.org -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebApplication",
      "name": "LotoIA - Generateur de Grilles EuroMillions",
      "url": "https://lotoia.fr/euromillions/generateur",
      "description": "Generateur de grilles EuroMillions optimisees par analyse statistique et IA",
      "applicationCategory": "UtilitiesApplication",
      "operatingSystem": "Web",
      "featureList": ["Generation de grilles EuroMillions", "Analyse statistique", "Numeros chauds/froids", "Indice de convergence", "5 numeros + 2 etoiles"],
      "offers": {
        "@type": "Offer",
        "price": "0",
        "priceCurrency": "EUR"
      }
    }
    </script>
    <link rel="stylesheet" href="/ui/static/style.css?v=1">
    <link rel="stylesheet" href="/ui/static/style-em.css?v=1">
    <link rel="stylesheet" href="/ui/static/sponsor-popup.css?v=1">
    <link rel="stylesheet" href="/ui/static/sponsor-popup75.css?v=1">
    <link rel="stylesheet" href="/ui/static/meta-result.css?v=1">
    <link rel="stylesheet" href="/ui/static/legal.css?v=1">
    <!-- Theme script (en premier pour eviter le flash) -->
    <script src="/ui/static/theme.js?v=1"></script>
    <!-- Analytics (charge apres consentement RGPD) -->
    <script src="/ui/static/analytics.js?v=1" defer></script>
    <script defer src="https://cloud.umami.is/script.js" data-website-id="e6add519-5d39-42cd-b4bf-b795f4408dcc"></script>
</head>
<body class="loto-page em-page">
    <!-- Barre de navigation moteur -->
    <nav class="engine-nav-subpage">
        <a href="/euromillions" class="engine-nav-btn">
            <span class="nav-arrow">&larr;</span>
            <span class="nav-text">Accueil EuroMillions</span>
        </a>
        <div class="engine-nav-right">
            <span class="engine-badge">EuroMillions</span>
            <button id="theme-switch" class="theme-switch" title="Changer de theme">
                <span class="icon-day">&#9728;&#65039;</span>
                <span class="icon-night">&#127769;</span>
            </button>
        </div>
    </nav>

    <!-- ══════════════════════════════════════════════════════════════
         HERO — Pattern aligne sur accueil (centre, hierarchie claire)
         ══════════════════════════════════════════════════════════════ -->
    <header class="page-header loto-hero-header">
        <div class="header-content">
            <h1><span>&#11088;</span> Exploration de grilles EuroMillions</h1>
            <p class="subtitle">Analyse statistique basee sur les tirages officiels EuroMillions</p>
            <div class="loto-hero-actions">
                <a href="/euromillions/simulateur" class="loto-hero-btn">
                    <span class="loto-hero-btn-icon">&#127919;</span>
                    Auditer une grille
                </a>
                <a href="#generator" class="loto-hero-btn loto-hero-btn-active">
                    <span class="loto-hero-btn-icon">&#11088;</span>
                    Explorer des grilles
                </a>
                <a href="/euromillions/statistiques" class="loto-hero-btn">
                    <span class="loto-hero-btn-icon">&#128202;</span>
                    Statistiques
                </a>
                <a href="/euromillions/news" class="loto-hero-btn loto-hero-btn-news">
                    <span class="loto-hero-btn-icon">&#128240;</span>
                    Actualites
                </a>
            </div>
            <p class="loto-hero-scroll-hint">&larr; glisser pour voir plus &rarr;</p>
        </div>
    </header>

    <div class="loto-container">

        <!-- ══════════════════════════════════════════════════════════════
             ZONE PRIMAIRE - GENERATEUR (etape secondaire apres choix hero)
             ══════════════════════════════════════════════════════════════ -->
        <section id="generator" class="generator-hero">
            <!-- Effets visuels data/algorithme -->
            <div class="scan-line"></div>
            <div class="data-particles">
                <span class="particle p1"></span>
                <span class="particle p2"></span>
                <span class="particle p3"></span>
                <span class="particle p4"></span>
                <span class="particle p5"></span>
                <span class="particle p6"></span>
                <span class="particle p7"></span>
                <span class="particle p8"></span>
            </div>
            <div class="generator-card">
                <!-- Header du generateur (centre, aligne pattern accueil) -->
                <div class="generator-header">
                    <div class="generator-badge">
                        <span class="badge-icon">&#11088;</span>
                        <span class="badge-text">MOTEUR HYBRIDE</span>
                    </div>
                    <p class="generator-subtitle">Configurez votre exploration sur <strong id="stat-tirages-inline">---</strong> tirages officiels EuroMillions <span class="data-depth">depuis 2019</span></p>
                    <img src="/static/hybride-moteur.png" class="band-hybride-moteur" alt="Mascotte HYBRIDE - Moteur d'analyse statistique EuroMillions">
                </div>

                <!-- Formulaire (etape secondaire) -->
                <div class="generator-form">
                    <div class="form-group">
                        <label for="draw-date">&#128197; Date du prochain tirage</label>
                        <input type="date" id="draw-date" class="premium-input">
                        <div id="date-error" class="date-error" style="display: none; color: #d32f2f; margin-top: 8px; font-size: 14px; font-weight: 500;"></div>
                    </div>

                    <div class="form-group">
                        <label>&#127922; Nombre de grilles a generer</label>
                        <div class="grid-count-selector" id="grid-count-selector">
                            <button class="count-btn" data-count="1">1</button>
                            <button class="count-btn" data-count="2">2</button>
                            <button class="count-btn active" data-count="3">3</button>
                            <button class="count-btn" data-count="4">4</button>
                            <button class="count-btn" data-count="5">5</button>
                        </div>
                        <small class="helper-text">Recommande : 3 grilles pour comparer differentes combinaisons</small>
                    </div>

                    <!-- CTA Secondaire — Generer (outline or — gere par CSS em-page override) -->
                    <button id="btn-analyze" class="btn-cta-main" style="background: transparent; border: 2px solid; padding: 13px 28px; font-size: 17px;">
                        <span class="cta-icon">&#10024;</span>
                        <span class="cta-text">Generer mes grilles</span>
                        <span class="cta-arrow">&rarr;</span>
                        <span class="spinner" style="display: none;"></span>
                    </button>

                    <!-- Slider Fenetre d'Analyse META DATA EM -->
                    <div class="meta-window-selector" id="meta-window-container-em">
                        <label class="meta-window-label">Fenetre d'analyse</label>

                        <!-- Toggle Tirages / Annees -->
                        <div class="meta-mode-toggle" id="meta-mode-toggle-em">
                            <button type="button" class="meta-mode-btn active" data-mode="tirages">Tirages</button>
                            <button type="button" class="meta-mode-btn" data-mode="annees">Annees</button>
                        </div>

                        <!-- Slider Mode Tirages (100-700 + GLOBAL, pas de 800 pour EM) -->
                        <div class="meta-window-slider-wrapper" id="meta-slider-tirages-em">
                            <input type="range" id="meta-window-slider-em" class="meta-window-slider"
                                   min="0" max="7" step="1" value="7">
                            <div class="meta-window-ticks">
                                <span>100</span>
                                <span>200</span>
                                <span>300</span>
                                <span>400</span>
                                <span>500</span>
                                <span>600</span>
                                <span>700</span>
                                <span>GLOBAL</span>
                            </div>
                        </div>

                        <!-- Slider Mode Annees -->
                        <div class="meta-window-slider-wrapper" id="meta-slider-annees-em" style="display: none;">
                            <input type="range" id="meta-years-slider-em" class="meta-window-slider"
                                   min="0" max="6" step="1" value="6">
                            <div class="meta-window-ticks">
                                <span>1A</span>
                                <span>2A</span>
                                <span>3A</span>
                                <span>4A</span>
                                <span>5A</span>
                                <span>6A</span>
                                <span>GLOBAL</span>
                            </div>
                        </div>

                        <div class="meta-window-info" id="meta-window-info-em">
                            <span class="meta-window-count">Analyse sur l'integralite de la base</span>
                            <span class="meta-window-dates">Fev 2019 &#8594; Aujourd'hui</span>
                        </div>

                        <p class="meta-slider-info" style="font-size:0.85rem; color:#6b7280; text-align:center; margin-top:8px; opacity:0.9;">
                            &#128269; Ce reglage s'applique uniquement a l'analyse META DONNEE.
                        </p>

                        <!-- CTA Meta Data EM -->
                        <button id="btn-metadata-75-em" class="btn-cta-secondary" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: #fff; border: none; padding: 18px 28px; font-size: 17px; font-weight: 700; border-radius: 14px; box-shadow: 0 6px 20px rgba(245,158,11,0.35); letter-spacing: 0.3px;">
                            <span>&#128202;</span>
                            <span>Analyser avec META (75 grilles)</span>
                        </button>
                    </div>

                    <p class="cta-subtext">Analyse instantanee &bull; Indice de convergence &bull; 100% gratuit</p>
                    <p class="cta-pdf-teaser">&#128196; Rapport PDF detaille genere par intelligence artificielle</p>

                    <!-- Info prochain tirage -->
                    <p class="cta-urgency" id="next-draw-urgency">
                        <span class="urgency-icon">&#9201;&#65039;</span>
                        <span class="urgency-text">Prochain tirage dans <strong id="days-until-draw">--</strong> jours</span>
                    </p>
                    <img src="/static/hybride-moteur.png" class="band-hybride-moteur-mobile" alt="Mascotte HYBRIDE">
                </div>
            </div>
        </section>

        <!-- Section stats rapides (cachee) -->
        <button id="btn-stats" class="btn btn-tertiary" style="display: none;">
            <span class="btn-text">&#128202; Voir statistiques</span>
            <span class="spinner" style="display: none;"></span>
        </button>

        <!-- Section: Results -->
        <section id="results-section" class="results-section" style="display: none;">
            <!-- Success State -->
            <div id="success-state" style="display: none;">
                <div class="card result-card">
                    <div class="card-header">
                        <h2 id="result-title">Resultats</h2>
                        <button id="btn-copy" class="btn-copy" title="Copier">&#128203;</button>
                    </div>

                    <!-- Numbers Grid -->
                    <div id="numbers-grid" class="numbers-grid"></div>

                    <!-- Key Info -->
                    <div id="key-info" class="key-info"></div>

                    <!-- Section Explications -->
                    <div id="explanations-section" class="explanations-section" style="display: none;"></div>
                </div>
            </div>

            <!-- Error State -->
            <div id="error-state" class="card error-card" style="display: none;">
                <h3>Une erreur est survenue</h3>
                <p id="error-message"></p>
            </div>
        </section>

        <!-- Section: Gestion des donnees (masquee — IDs requis par app-em.js) -->
        <details style="display: none;">
            <summary style="cursor: pointer; padding: 12px; background: var(--bg-white); border-radius: 8px; font-weight: 600; color: var(--text-muted); margin-bottom: 16px;">
                &#9881;&#65039; Gestion des donnees
            </summary>

            <!-- Installation Base de donnees -->
            <section class="card install-section">
                <h2>Base de donnees</h2>
                <p class="system-description">
                    Initialise la base de donnees EuroMillions si elle n'existe pas encore.
                </p>

                <!-- Statut de la base -->
                <div id="db-status" class="db-status">
                    <span class="status-icon">&#9203;</span>
                    <div class="status-text">
                        <div id="db-main-status">Verification en cours...</div>
                        <div id="db-period" style="display:none;"></div>
                        <div id="db-algo-note" style="display:none; font-style: italic;"></div>
                    </div>
                </div>

                <!-- Boutons d'installation -->
                <div class="install-buttons">
                    <button id="btn-install" class="btn btn-install">
                        <span class="btn-text">Installer la base de donnees</span>
                        <span class="spinner" style="display: none;"></span>
                    </button>
                    <button id="btn-reset" class="btn btn-reset" style="display: none;">
                        <span class="btn-text">Reinitialiser la base</span>
                        <span class="spinner" style="display: none;"></span>
                    </button>
                </div>

                <!-- Message de statut -->
                <div id="install-status" class="install-status" style="display: none;"></div>
            </section>

            <!-- Mise a jour -->
            <section class="card system-section">
                <h2>Mise a jour</h2>
                <p class="system-description">
                    Synchronise les donnees avec les tirages officiels les plus recents.
                </p>
                <button id="btn-update" class="btn btn-system">
                    <span class="btn-text">Mettre a jour les donnees</span>
                    <span class="spinner" style="display: none;"></span>
                </button>
                <!-- Message de statut de mise a jour -->
                <div id="update-status" class="update-status" style="display: none;"></div>
            </section>
        </details>

        <!-- ══════════════════════════════════════════════════════════════
             MINI-FAQ - Questions essentielles (3 max)
             ══════════════════════════════════════════════════════════════ -->
        <section class="mini-faq-section" id="faq">
            <div class="mini-faq-header">
                <h3>Questions frequentes</h3>
                <p>Les reponses aux questions essentielles</p>
            </div>

            <div class="mini-faq-container">
                <!-- Question 1 -->
                <div class="faq-item">
                    <button class="faq-question">
                        <span>Comment fonctionne le generateur EuroMillions ?</span>
                        <span class="faq-icon">+</span>
                    </button>
                    <div class="faq-answer">
                        <p>Notre generateur utilise le <strong>moteur HYBRIDE</strong> qui analyse les tirages historiques EuroMillions depuis 2019.</p>
                        <p>Il combine analyse long terme (60%) et tendances recentes (40%) pour generer des grilles de 5 numeros + 2 etoiles statistiquement equilibrees avec un indice de convergence.</p>
                    </div>
                </div>

                <!-- Question 2 -->
                <div class="faq-item">
                    <button class="faq-question">
                        <span>L'EuroMillions est-il previsible ?</span>
                        <span class="faq-icon">+</span>
                    </button>
                    <div class="faq-answer">
                        <p><strong>NON, l'EuroMillions est un jeu de pur hasard.</strong> Aucun algorithme ne peut predire les resultats.</p>
                        <p>Notre outil propose des grilles <strong>statistiquement guidees</strong>, mais cela <strong>ne garantit AUCUN gain</strong>. Probabilite du jackpot : 1 sur 139 838 160.</p>
                    </div>
                </div>

                <!-- Question 3 -->
                <div class="faq-item">
                    <button class="faq-question">
                        <span>L'outil est-il gratuit ?</span>
                        <span class="faq-icon">+</span>
                    </button>
                    <div class="faq-answer">
                        <p>Oui, LotoIA est <strong>100% gratuit</strong>, sans inscription ni paiement requis.</p>
                        <p>Toutes les fonctionnalites sont accessibles librement.</p>
                    </div>
                </div>
            </div>

            <!-- Lien vers FAQ complete -->
            <div class="mini-faq-footer">
                <a href="/euromillions/faq" class="btn-see-more">
                    <span>Voir toutes les questions</span>
                    <span class="arrow">&rarr;</span>
                </a>
            </div>
        </section>

        <!-- Footer -->
        <footer class="footer">
            <!-- Navigation footer -->
            <div class="footer-nav">
                <a href="/">Moteurs</a>
                <span class="footer-sep">&bull;</span>
                <a href="/euromillions">Accueil</a>
                <span class="footer-sep">&bull;</span>
                <a href="/euromillions/simulateur">Analyse</a>
                <span class="footer-sep">&bull;</span>
                <a href="/euromillions/generateur" class="active">Exploration</a>
                <span class="footer-sep">&bull;</span>
                <a href="/euromillions/statistiques">Statistiques</a>
                <span class="footer-sep">&bull;</span>
                <a href="/euromillions/news">Actualites</a>
                <span class="footer-sep">&bull;</span>
                <a href="/euromillions/faq">FAQ</a>
            </div>

            <!-- Liens juridiques -->
            <div class="footer-legal">
                <a href="/mentions-legales">Mentions legales</a>
                <span class="footer-sep">&bull;</span>
                <a href="/politique-confidentialite">Confidentialite</a>
                <span class="footer-sep">&bull;</span>
                <a href="/politique-cookies">Cookies</a>
                <span class="footer-sep">&bull;</span>
                <a href="/disclaimer">Avertissements</a>
            </div>

            <p class="footer-brand">LotoIA.fr <span class="app-version">v1.001</span></p>

            <!-- Avertissement jeu responsable -->
            <p class="footer-disclaimer">Jouer comporte des risques : endettement, isolement, dependance. Appelez le 09 74 75 13 13 (appel non surtaxe).</p>
            <p class="footer-help">Interdiction de jeu aux mineurs. <a href="https://www.joueurs-info-service.fr" target="_blank" rel="noopener">Joueurs Info Service</a></p>

            <!-- Credits -->
            <div class="credits">
                <p class="dev-by">Developpe par <strong>JyppY</strong></p>
            </div>
        </footer>
    </div>

    <!-- Bouton Scroll to Top -->
    <button id="scroll-to-top" class="scroll-to-top" aria-label="Retour en haut">
        &uarr;
    </button>

    <!-- META ANALYSE 75 Grilles EM (sponsor-popup.js grilles = sprint suivant) -->
    <script src="/ui/static/sponsor-popup75-em.js?v=1"></script>
    <script>
    // Variables globales pour la fenetre d'analyse META EM
    var metaWindowSizeEM = "GLOBAL";
    var metaYearsSizeEM = null;
    var metaCurrentModeEM = "tirages";

    // Mappings sliders discrets EM (pas de 800 — seulement 729 tirages)
    var META_WINDOW_MAP_EM = [100, 200, 300, 400, 500, 600, 700, "GLOBAL"];
    var META_YEARS_MAP_EM = [1, 2, 3, 4, 5, 6, "GLOBAL"];

    function formatDateFREM(dateStr) {
        if (!dateStr || dateStr === '---') return '---';
        try {
            var d = new Date(dateStr);
            return d.toLocaleDateString('fr-FR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });
        } catch (e) {
            return dateStr;
        }
    }

    (function() {
        var toggleContainer = document.getElementById('meta-mode-toggle-em');
        var sliderTirages = document.getElementById('meta-slider-tirages-em');
        var sliderAnnees = document.getElementById('meta-slider-annees-em');
        var windowSlider = document.getElementById('meta-window-slider-em');
        var yearsSlider = document.getElementById('meta-years-slider-em');
        var infoContainer = document.getElementById('meta-window-info-em');

        if (!toggleContainer || !infoContainer) return;

        var countEl = infoContainer.querySelector('.meta-window-count');
        var datesEl = infoContainer.querySelector('.meta-window-dates');
        var toggleBtns = toggleContainer.querySelectorAll('.meta-mode-btn');

        // Donnees locales fenetre d'analyse EM (fallback)
        var windowInfoTiragesEM = {
            100: { draws: 100, start: "2025-05-16", end: "2026-02-11" },
            200: { draws: 200, start: "2024-10-18", end: "2026-02-11" },
            300: { draws: 300, start: "2024-04-02", end: "2026-02-11" },
            400: { draws: 400, start: "2023-09-08", end: "2026-02-11" },
            500: { draws: 500, start: "2023-02-17", end: "2026-02-11" },
            600: { draws: 600, start: "2022-07-29", end: "2026-02-11" },
            700: { draws: 700, start: "2021-12-31", end: "2026-02-11" },
            GLOBAL: { draws: 729, start: "2019-02-15", end: "2026-02-11" }
        };

        function updateTiragesDisplayEM(value) {
            var windowValue = META_WINDOW_MAP_EM[value];
            metaWindowSizeEM = windowValue === "GLOBAL" ? "GLOBAL" : String(windowValue);
            metaYearsSizeEM = null;

            if (windowValue === "GLOBAL") {
                var globalInfo = windowInfoTiragesEM["GLOBAL"];
                countEl.textContent = "Analyse sur l'integralite de la base (" + globalInfo.draws + " tirages)";
                datesEl.textContent = "Du " + formatDateFREM(globalInfo.start) + " au " + formatDateFREM(globalInfo.end);
            } else {
                countEl.textContent = "Analyse sur " + windowValue + " tirages";
                var info = windowInfoTiragesEM[windowValue];
                if (info) {
                    datesEl.textContent = "Du " + formatDateFREM(info.start) + " au " + formatDateFREM(info.end);
                } else {
                    datesEl.textContent = "";
                }
            }
        }

        var windowInfoAnneesEM = {
            1: { draws: 104, start: "2025-02-14", end: "2026-02-11" },
            2: { draws: 208, start: "2024-02-13", end: "2026-02-11" },
            3: { draws: 312, start: "2023-02-14", end: "2026-02-11" },
            4: { draws: 416, start: "2022-02-15", end: "2026-02-11" },
            5: { draws: 520, start: "2021-02-12", end: "2026-02-11" },
            6: { draws: 624, start: "2020-02-14", end: "2026-02-11" },
            GLOBAL: { draws: 729, start: "2019-02-15", end: "2026-02-11" }
        };

        // Chargement dynamique des fenetres depuis la BDD
        fetch('/api/euromillions/meta-windows-info')
            .then(function(res) { return res.json(); })
            .then(function(data) {
                if (data.tirages) windowInfoTiragesEM = data.tirages;
                if (data.annees) windowInfoAnneesEM = data.annees;
                if (data.tirages && data.tirages.GLOBAL) {
                    window.TOTAL_TIRAGES_EM = data.tirages.GLOBAL.draws;
                }
                if (metaCurrentModeEM === 'tirages' && windowSlider) {
                    updateTiragesDisplayEM(windowSlider.value);
                } else if (metaCurrentModeEM === 'annees' && yearsSlider) {
                    updateAnneesDisplayEM(yearsSlider.value);
                }
            })
            .catch(function() { /* fallback hardcode en place */ });

        function updateAnneesDisplayEM(value) {
            var yearsValue = META_YEARS_MAP_EM[value];
            metaYearsSizeEM = yearsValue === "GLOBAL" ? "GLOBAL" : String(yearsValue);
            metaWindowSizeEM = "GLOBAL";

            if (yearsValue === "GLOBAL") {
                var globalInfoA = windowInfoAnneesEM["GLOBAL"];
                countEl.textContent = "Analyse sur l'integralite de la base (" + globalInfoA.draws + " tirages)";
                datesEl.textContent = "Du " + formatDateFREM(globalInfoA.start) + " au " + formatDateFREM(globalInfoA.end);
            } else {
                var info = windowInfoAnneesEM[yearsValue];
                var nbTirages = info ? info.draws : "?";
                countEl.textContent = "Analyse sur " + yearsValue + " an" + (yearsValue > 1 ? "s" : "") + " (" + nbTirages + " tirages)";
                if (info) {
                    datesEl.textContent = "Du " + formatDateFREM(info.start) + " au " + formatDateFREM(info.end);
                } else {
                    datesEl.textContent = "";
                }
            }
        }

        toggleBtns.forEach(function(btn) {
            btn.addEventListener('click', function() {
                var mode = this.getAttribute('data-mode');
                if (mode === metaCurrentModeEM) return;
                metaCurrentModeEM = mode;
                toggleBtns.forEach(function(b) { b.classList.remove('active'); });
                this.classList.add('active');
                if (mode === "tirages") {
                    sliderTirages.style.display = "block";
                    sliderAnnees.style.display = "none";
                    updateTiragesDisplayEM(parseInt(windowSlider.value, 10));
                } else {
                    sliderTirages.style.display = "none";
                    sliderAnnees.style.display = "block";
                    updateAnneesDisplayEM(parseInt(yearsSlider.value, 10));
                }
            });
        });

        if (windowSlider) {
            windowSlider.addEventListener('input', function() {
                updateTiragesDisplayEM(parseInt(this.value, 10));
            });
            windowSlider.value = 7;
        }

        if (yearsSlider) {
            yearsSlider.addEventListener('input', function() {
                updateAnneesDisplayEM(parseInt(this.value, 10));
            });
            yearsSlider.value = 6;
        }

        updateTiragesDisplayEM(7);

        // Bouton META DATA EM
        var btn = document.getElementById('btn-metadata-75-em');
        if (!btn) return;
        btn.addEventListener('click', function(e) {
            e.preventDefault();

            if (window.LotoIAAnalytics?.productEngine?.track) {
                window.LotoIAAnalytics.productEngine.track('meta_click_em', {
                    version: 75,
                    page: 'euromillions',
                    mode: metaCurrentModeEM,
                    window: metaWindowSizeEM,
                    years: metaYearsSizeEM
                });
            }

            if (typeof showMetaAnalysePopupEM === 'function') {
                showMetaAnalysePopupEM();
            } else {
                console.warn('[META ANALYSE EM] Module sponsor-popup75-em.js non charge');
            }
        });
    })();
    </script>

    <!-- Scripts applicatifs -->
    <script src="/ui/static/app-em.js?v=1"></script>
    <script src="/ui/static/scroll.js?v=1"></script>
    <script src="/ui/static/cookie-consent.js?v=1"></script>

    <!-- HYBRIDE Chatbot Widget EuroMillions -->
    <link rel="stylesheet" href="/ui/static/hybride-chatbot.css?v=4.3">
    <div id="hybride-chatbot-root"></div>
    <script src="/ui/static/hybride-chatbot-em.js?v=1.0"></script>

    <script src="/ui/static/version-inject.js"></script>
</body>
</html>
