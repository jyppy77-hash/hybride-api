<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, interactive-widget=resizes-content">
    <title>Statistiques Loto France - Fr√©quences et Tendances | LotoIA</title>
    <meta name="description" content="Statistiques compl√®tes du Loto fran√ßais : fr√©quences des num√©ros, tendances, num√©ros chauds et froids, historique des tirages depuis 2019.">
    <meta name="keywords" content="statistiques loto, fr√©quences num√©ros loto, moteur HYBRIDE, num√©ros chauds froids, retard loto, HYBRIDE, tendances loto">
    <link rel="canonical" href="https://lotoia.fr/statistiques">
    <link rel="icon" type="image/svg+xml" href="/static/favicon.svg">
    <!-- Open Graph -->
    <meta property="og:type" content="website">
    <meta property="og:site_name" content="LotoIA">
    <meta property="og:locale" content="fr_FR">
    <meta property="og:title" content="Statistiques Loto France | LotoIA">
    <meta property="og:description" content="Fr√©quences, tendances et num√©ros chauds/froids du Loto fran√ßais depuis 2019.">
    <meta property="og:url" content="https://lotoia.fr/statistiques">
    <meta property="og:image" content="https://lotoia.fr/static/og-image.jpg">
    <meta property="og:image:secure_url" content="https://lotoia.fr/static/og-image.jpg">
    <meta property="og:image:type" content="image/jpeg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="Statistiques Loto France | LotoIA">
    <meta name="twitter:description" content="Fr√©quences, tendances et num√©ros chauds/froids du Loto fran√ßais.">
    <meta name="twitter:image" content="https://lotoia.fr/static/og-image.jpg">
    <!-- JSON-LD Schema.org -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Dataset",
      "name": "Statistiques Loto France",
      "description": "Statistiques des tirages du Loto fran√ßais depuis 2019",
      "url": "https://lotoia.fr/statistiques",
      "creator": {
        "@type": "Organization",
        "name": "LotoIA"
      },
      "temporalCoverage": "2019/.."
    }
    </script>
    <link rel="stylesheet" href="/ui/static/style.css?v=8">
    <link rel="stylesheet" href="/ui/static/legal.css?v=7">
    <!-- Theme script (en premier pour √©viter le flash) -->
    <script src="/ui/static/theme.js?v=7"></script>
    <!-- Analytics (charge apres consentement RGPD) -->
    <script src="/ui/static/analytics.js?v=7" defer></script>
    <style>
        /* =================================================================
           STATISTIQUES ‚Äî Styles sp√©cifiques
           H√©rite du ch√¢ssis unifi√© (style.css) : page-header, loto-hero-header,
           engine-nav-subpage, loto-hero-actions, loto-hero-btn
           ================================================================= */

        /* ---- Container (jointure header ‚Üí carte) ---- */
        .stats-container {
            max-width: var(--app-max-width, 1140px);
            margin: -50px auto 40px;
            padding: 0 var(--app-padding-x, 24px);
            position: relative;
            z-index: 10;
        }

        /* ---- Carte principale (onglets) ---- */
        .tabs-card {
            background: var(--theme-bg-card);
            border: 1px solid var(--theme-border);
            border-radius: 16px;
            padding: 32px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.1);
        }

        /* ---- Onglets ---- */
        .tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 32px;
            border-bottom: 2px solid var(--theme-border);
            flex-wrap: wrap;
            position: relative;
            overflow: visible;
        }

        .band-hybride-stat {
            position: absolute;
            right: 16px;
            top: 20%;
            transform: translateY(-50%) scaleY(0.94);
            transform-origin: center;
            height: 70px;
            width: auto;
            opacity: 0.95;
            pointer-events: none;
        }

        @media (max-width: 768px) {
            .band-hybride-stat {
                height: 58px;
                transform: translateY(-50%) scaleY(0.94);
            }
        }

        .tab {
            padding: 16px 24px;
            background: transparent;
            border: none;
            border-bottom: 3px solid transparent;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            color: var(--theme-text-muted);
            transition: all 0.3s ease;
            font-family: inherit;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .tab:hover {
            color: var(--primary);
            background: rgba(102, 126, 234, 0.05);
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.4s ease-in;
        }

        /* ---- Analyse par numero ---- */
        .number-selector {
            display: flex;
            gap: 12px;
            align-items: center;
            margin-bottom: 24px;
        }

        .number-selector select {
            padding: 12px 16px;
            font-size: 1.05rem;
            border: 2px solid var(--theme-border);
            border-radius: 8px;
            font-family: inherit;
            min-width: 120px;
            background: var(--theme-bg-input, var(--theme-bg-card));
            color: var(--theme-text-primary);
        }

        .number-selector select:focus {
            outline: none;
            border-color: var(--primary);
        }

        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }

        .stat-card {
            background: var(--bg-light);
            border-left: 4px solid var(--primary);
            padding: 20px;
            border-radius: 8px;
        }

        .stat-card .stat-label {
            font-size: 0.9rem;
            color: var(--theme-text-muted);
            margin-bottom: 8px;
        }

        .stat-card .stat-value {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--theme-text-primary);
        }

        .dates-list {
            background: var(--bg-light);
            border-radius: 8px;
            padding: 20px;
            max-height: 300px;
            overflow-y: auto;
        }

        .dates-list h3 {
            font-size: 1.1rem;
            margin-bottom: 16px;
            color: var(--theme-text-primary);
        }

        .date-item {
            padding: 8px 12px;
            background: var(--theme-bg-card);
            border-radius: 4px;
            margin-bottom: 8px;
            font-size: 0.95rem;
            color: var(--theme-text-primary);
        }

        .info-note {
            background: rgba(33, 150, 243, 0.08);
            border-left: 4px solid #2196F3;
            padding: 16px;
            border-radius: 8px;
            margin-top: 24px;
            font-size: 0.95rem;
            color: var(--theme-text-primary);
        }

        /* ---- Historique ---- */
        .search-form {
            margin-bottom: 24px;
        }

        .search-form label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--theme-text-primary);
        }

        .search-form .input-group {
            display: flex;
            gap: 12px;
            align-items: center;
        }

        .search-form input[type="date"] {
            padding: 12px 16px;
            font-size: 1.05rem;
            border: 2px solid var(--theme-border);
            border-radius: 8px;
            font-family: inherit;
            background: var(--theme-bg-input, var(--theme-bg-card));
            color: var(--theme-text-primary);
        }

        .search-result {
            background: var(--bg-light);
            border-radius: 8px;
            padding: 24px;
            margin-top: 24px;
            color: var(--theme-text-primary);
        }

        .search-result.error {
            background: rgba(239, 68, 68, 0.08);
            border-left: 4px solid var(--error);
            color: var(--error);
        }

        .search-result.not-found {
            background: rgba(245, 124, 0, 0.08);
            border-left: 4px solid #F57C00;
            color: #F57C00;
        }

        .draw-numbers {
            display: flex;
            gap: 12px;
            margin: 16px 0;
            flex-wrap: wrap;
        }

        .draw-number {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
            box-shadow: 0 4px 8px rgba(74, 144, 226, 0.3);
        }

        .draw-number.chance {
            background: linear-gradient(135deg, #FFD700, #FFA500);
            box-shadow: 0 4px 8px rgba(255, 215, 0, 0.4);
        }

        /* ---- Top / Flop ---- */
        .topflop-section {
            margin-bottom: 32px;
        }

        .topflop-section h3 {
            font-size: 1.3rem;
            margin-bottom: 16px;
            color: var(--theme-text-primary);
        }

        .topflop-section h3.top-title {
            color: var(--success);
        }

        .topflop-section h3.flop-title {
            color: var(--tertiary);
        }

        .numbers-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
            gap: 12px;
            margin-bottom: 16px;
        }

        .number-card {
            background: var(--bg-light);
            border-radius: 8px;
            padding: 16px 12px;
            text-align: center;
            border: 2px solid var(--theme-border);
            transition: all 0.3s ease;
        }

        .number-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-hover);
        }

        .number-card.top {
            border-color: var(--success);
            background: rgba(16, 185, 129, 0.06);
        }

        .number-card.flop {
            border-color: var(--tertiary);
            background: var(--bg-light);
        }

        .number-card .number {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .number-card.top .number {
            color: var(--success);
        }

        .number-card.flop .number {
            color: var(--tertiary);
        }

        .number-card .count {
            font-size: 0.9rem;
            color: var(--theme-text-muted);
        }

        /* ---- Responsive ---- */
        @media (max-width: 768px) {
            .numbers-grid {
                grid-template-columns: repeat(5, 1fr);
                gap: 8px;
            }

            .number-card {
                padding: 12px 8px;
            }

            .number-card .number {
                font-size: 1.5rem;
            }

            .number-card .count {
                font-size: 0.8rem;
            }

            .tabs-card {
                padding: 20px 16px;
            }

            .tab {
                padding: 12px 16px;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 480px) {
            .tab {
                padding: 10px 12px;
                font-size: 0.85rem;
            }

            .number-selector {
                flex-direction: column;
                gap: 10px;
            }

            .number-selector select,
            .number-selector button {
                width: 100%;
            }
        }
    </style>
    <script defer src="https://cloud.umami.is/script.js" data-website-id="e6add519-5d39-42cd-b4bf-b795f4408dcc"></script>
</head>
<body class="stats-page">
    <!-- Barre de navigation moteur -->
    <nav class="engine-nav-subpage">
        <a href="/accueil" class="engine-nav-btn">
            <span class="nav-arrow">‚Üê</span>
            <span class="nav-text">Accueil LotoIA</span>
        </a>
        <div class="engine-nav-right">
            <span class="engine-badge">Loto France</span>
            <button id="theme-switch" class="theme-switch" title="Changer de th√®me">
                <span class="icon-day">‚òÄÔ∏è</span>
                <span class="icon-night">üåô</span>
            </button>
        </div>
    </nav>

    <!-- Header Premium ‚Äî pattern align√© Analyse / Exploration -->
    <header class="page-header loto-hero-header">
        <div class="header-content">
            <h1><span>üìä</span> Statistiques</h1>
            <p class="subtitle">Explorez l'historique complet et analysez les donn√©es des tirages.</p>
            <div class="loto-hero-actions">
                <a href="/simulateur" class="loto-hero-btn">
                    <span class="loto-hero-btn-icon">üéØ</span>
                    Auditer une grille
                </a>
                <a href="/loto" class="loto-hero-btn">
                    <span class="loto-hero-btn-icon">üß†</span>
                    Explorer des grilles
                </a>
                <a href="/statistiques" class="loto-hero-btn loto-hero-btn-active">
                    <span class="loto-hero-btn-icon">üìä</span>
                    Statistiques
                </a>
                <a href="/news" class="loto-hero-btn loto-hero-btn-news">
                    <span class="loto-hero-btn-icon">üì∞</span>
                    Actualit√©s
                </a>
            </div>
            <p class="loto-hero-scroll-hint">‚Üê glisser pour voir plus ‚Üí</p>
        </div>
    </header>

    <!-- Contenu principal -->
    <div class="stats-container">
        <div class="tabs-card">
            <div class="tabs">
                <button class="tab active" onclick="switchTab('historique')">üìÖ Historique des tirages</button>
                <button class="tab" onclick="switchTab('analyse')">üîç Analyse par num√©ro</button>
                <button class="tab" onclick="switchTab('topflop')">üìå Top / Flop</button>
                <img src="/static/Hybride-audit.png?v=1" class="band-hybride-stat" alt="Mascotte HYBRIDE - Analyse statistique des tirages du Loto">
            </div>

            <!-- ONGLET 1 : Historique des tirages -->
            <div id="tab-historique" class="tab-content active">
                <div class="search-form">
                    <label for="draw_date">Rechercher un tirage par date</label>
                    <div class="input-group">
                        <input type="date" id="draw_date" name="draw_date">
                        <button onclick="searchDraw()" class="btn-primary">Rechercher</button>
                    </div>
                </div>

                <div id="search-result" style="display: none;"></div>

                <div class="info-note">
                    <strong>√Ä propos de l'historique :</strong><br>
                    Cette base contient les tirages officiels du Loto. Utilisez le s√©lecteur de date pour consulter un tirage sp√©cifique.
                </div>
            </div>

            <!-- ONGLET 2 : Analyse par num√©ro -->
            <div id="tab-analyse" class="tab-content">
                <div class="number-selector">
                    <label for="number-select"><strong>S√©lectionnez un num√©ro :</strong></label>
                    <select id="number-select">
                        <option value="">-- Choisir --</option>
                    </select>
                    <button onclick="analyzeNumber()" class="btn-primary">Analyser</button>
                </div>

                <div id="analysis-result" style="display: none;">
                    <h2 id="analysis-title" style="margin-bottom: 20px; color: var(--primary);"></h2>

                    <div class="stats-cards">
                        <div class="stat-card">
                            <div class="stat-label">Nombre de sorties</div>
                            <div class="stat-value" id="stat-appearances">-</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Premi√®re apparition</div>
                            <div class="stat-value" id="stat-first" style="font-size: 1.3rem;">-</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">Derni√®re apparition</div>
                            <div class="stat-value" id="stat-last" style="font-size: 1.3rem;">-</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-label">√âcart actuel</div>
                            <div class="stat-value" id="stat-gap">-</div>
                        </div>
                    </div>

                    <div class="dates-list">
                        <h3>Dates d'apparition</h3>
                        <div id="dates-container"></div>
                        <button id="show-all-dates" onclick="toggleAllDates()" class="btn btn-secondary" style="margin-top: 16px; display: none;">
                            Voir toutes les dates
                        </button>
                    </div>

                    <div class="info-note">
                        <strong>Vocabulaire :</strong><br>
                        ‚Ä¢ <strong>Sorties</strong> : nombre de fois o√π le num√©ro est apparu dans l'historique.<br>
                        ‚Ä¢ <strong>√âcart actuel</strong> : nombre de tirages depuis la derni√®re apparition du num√©ro.<br>
                        Ces donn√©es sont purement descriptives et n'impliquent aucune pr√©diction.
                    </div>
                </div>
            </div>

            <!-- ONGLET 3 : Top / Flop -->
            <div id="tab-topflop" class="tab-content">
                <p style="margin-bottom: 24px; color: var(--text-muted);">
                    Fr√©quence d'apparition de chaque num√©ro sur l'ensemble de l'historique.
                </p>

                <!-- Section TOP -->
                <div class="topflop-section">
                    <h3 class="top-title">üèÜ Num√©ros les plus sortis</h3>
                    <div id="top-grid" class="numbers-grid">
                        <!-- Rempli dynamiquement par JavaScript -->
                    </div>
                    <button id="show-all-top" onclick="toggleTopView()" class="btn-secondary">
                        Voir tous les num√©ros
                    </button>
                </div>

                <!-- Section FLOP -->
                <div class="topflop-section">
                    <h3 class="flop-title">üìâ Num√©ros les moins sortis</h3>
                    <div id="flop-grid" class="numbers-grid">
                        <!-- Rempli dynamiquement par JavaScript -->
                    </div>
                    <button id="show-all-flop" onclick="toggleFlopView()" class="btn-secondary">
                        Voir tous les num√©ros
                    </button>
                </div>

                <div class="info-note">
                    <strong>√Ä propos de ces donn√©es :</strong><br>
                    Ces fr√©quences repr√©sentent le nombre de sorties de chaque num√©ro sur l'ensemble de l'historique.
                    Elles sont purement descriptives et n'impliquent aucune pr√©diction sur les tirages futurs.
                </div>
            </div>
        </div>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-nav">
                <a href="/">Moteurs</a>
                <span class="footer-sep">‚Ä¢</span>
                <a href="/accueil">Accueil</a>
                <span class="footer-sep">‚Ä¢</span>
                <a href="/simulateur">Analyse</a>
                <span class="footer-sep">‚Ä¢</span>
                <a href="/loto">Exploration</a>
                <span class="footer-sep">‚Ä¢</span>
                <a href="/statistiques" class="active">Statistiques</a>
                <span class="footer-sep">‚Ä¢</span>
                <a href="/news">Actualit√©s</a>
                <span class="footer-sep">‚Ä¢</span>
                <a href="/faq">FAQ</a>
            </div>
            <div class="footer-legal">
                <a href="/mentions-legales">Mentions l√©gales</a>
                <span class="footer-sep">‚Ä¢</span>
                <a href="/politique-confidentialite">Confidentialit√©</a>
                <span class="footer-sep">‚Ä¢</span>
                <a href="/politique-cookies">Cookies</a>
            </div>
            <p class="footer-brand">LotoIA.fr <span class="app-version">v1.001</span></p>
            <p class="footer-disclaimer">Jouer comporte des risques : endettement, isolement, d√©pendance. Appelez le 09 74 75 13 13 (appel non surtax√©).</p>
            <p class="footer-help">Interdiction de jeu aux mineurs. <a href="https://www.joueurs-info-service.fr" target="_blank" rel="noopener">Joueurs Info Service</a></p>
            <div class="credits">
                <p class="dev-by">D√©velopp√© par <strong>JyppY</strong></p>
            </div>
        </footer>
    </div>

    <script>
        // Variables globales
        let allDates = [];
        let showingAllDates = false;

        // Initialisation : remplir le s√©lecteur de num√©ros
        document.addEventListener('DOMContentLoaded', function() {
            const select = document.getElementById('number-select');
            for (let i = 1; i <= 49; i++) {
                const option = document.createElement('option');
                option.value = i;
                option.textContent = i;
                select.appendChild(option);
            }

            // Permettre la recherche avec Entr√©e sur l'historique
            document.getElementById('draw_date').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchDraw();
                }
            });
        });

        // Gestion des onglets
        function switchTab(tabName) {
            // D√©sactiver tous les onglets
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // Activer l'onglet s√©lectionn√©
            event.target.classList.add('active');
            document.getElementById(`tab-${tabName}`).classList.add('active');
        }

        // HISTORIQUE : Recherche d'un tirage
        function searchDraw() {
            const dateInput = document.getElementById('draw_date');
            const resultDiv = document.getElementById('search-result');
            const date = dateInput.value;

            if (!date) {
                resultDiv.className = 'search-result error';
                resultDiv.innerHTML = '<strong>Erreur :</strong> Veuillez s√©lectionner une date.';
                resultDiv.style.display = 'block';
                return;
            }

            // Appel √† l'API
            fetch(`/draw/${date}`)
                .then(response => response.json())
                .then(data => {
                    if (data.success && data.found) {
                        const draw = data.draw;
                        // Tri croissant visuel ‚Äî donn√©es brutes c√¥t√© moteur/API
                        const sorted = [draw.n1, draw.n2, draw.n3, draw.n4, draw.n5].sort((a, b) => a - b);
                        resultDiv.className = 'search-result';
                        resultDiv.innerHTML = `
                            <h2 style="margin-bottom: 16px; color: var(--primary);">Tirage du ${formatDate(draw.date)}</h2>
                            <p><strong>Num√©ros gagnants :</strong></p>
                            <div class="draw-numbers">
                                ${sorted.map(n => `<div class="draw-number">${n}</div>`).join('')}
                            </div>
                            <p><strong>Num√©ro Chance :</strong></p>
                            <div class="draw-numbers">
                                <div class="draw-number chance">${draw.chance}</div>
                            </div>
                        `;
                        resultDiv.style.display = 'block';
                    } else if (data.success && !data.found) {
                        resultDiv.className = 'search-result not-found';
                        resultDiv.innerHTML = `<strong>Aucun tirage trouv√© pour la date ${formatDate(date)}</strong>`;
                        resultDiv.style.display = 'block';
                    } else {
                        resultDiv.className = 'search-result error';
                        resultDiv.innerHTML = `<strong>Erreur :</strong> ${data.message || 'Une erreur est survenue'}`;
                        resultDiv.style.display = 'block';
                    }
                })
                .catch(error => {
                    resultDiv.className = 'search-result error';
                    resultDiv.innerHTML = `<strong>Erreur r√©seau :</strong> ${error.message}`;
                    resultDiv.style.display = 'block';
                });
        }

        // ANALYSE : Analyser un num√©ro
        function analyzeNumber() {
            const select = document.getElementById('number-select');
            const number = select.value;
            const resultDiv = document.getElementById('analysis-result');

            if (!number) {
                alert('Veuillez s√©lectionner un num√©ro.');
                return;
            }

            // Appel √† l'API
            fetch(`/api/stats/number/${number}`)
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        // Afficher le titre
                        document.getElementById('analysis-title').textContent = `Analyse historique du num√©ro ${data.number}`;

                        // Remplir les statistiques
                        document.getElementById('stat-appearances').textContent = data.total_appearances;
                        document.getElementById('stat-first').textContent = data.first_appearance ? formatDate(data.first_appearance) : 'N/A';
                        document.getElementById('stat-last').textContent = data.last_appearance ? formatDate(data.last_appearance) : 'N/A';
                        document.getElementById('stat-gap').textContent = data.current_gap + ' tirages';

                        // Stocker toutes les dates
                        allDates = data.appearance_dates;

                        // Afficher les 10 derni√®res dates par d√©faut
                        displayDates(false);

                        // Afficher le bouton "Voir tout" si plus de 10 dates
                        const showAllBtn = document.getElementById('show-all-dates');
                        if (allDates.length > 10) {
                            showAllBtn.style.display = 'inline-block';
                            showAllBtn.textContent = 'Voir toutes les dates';
                            showingAllDates = false;
                        } else {
                            showAllBtn.style.display = 'none';
                        }

                        // Afficher les r√©sultats
                        resultDiv.style.display = 'block';
                    } else {
                        alert('Erreur : ' + (data.message || 'Impossible d\'analyser le num√©ro'));
                    }
                })
                .catch(error => {
                    alert('Erreur r√©seau : ' + error.message);
                });
        }

        // Afficher les dates (10 derni√®res ou toutes)
        function displayDates(showAll) {
            const container = document.getElementById('dates-container');
            const datesToShow = showAll ? allDates : allDates.slice(-10).reverse();

            container.innerHTML = '';

            if (datesToShow.length === 0) {
                container.innerHTML = '<p style="color: var(--text-muted);">Aucune apparition enregistr√©e.</p>';
                return;
            }

            datesToShow.forEach(date => {
                const dateItem = document.createElement('div');
                dateItem.className = 'date-item';
                dateItem.textContent = formatDate(date);
                container.appendChild(dateItem);
            });
        }

        // Toggle affichage de toutes les dates
        function toggleAllDates() {
            showingAllDates = !showingAllDates;
            displayDates(showingAllDates);

            const btn = document.getElementById('show-all-dates');
            btn.textContent = showingAllDates ? 'Voir moins' : 'Voir toutes les dates';
        }

        // Formater une date YYYY-MM-DD en DD/MM/YYYY
        function formatDate(dateStr) {
            const [year, month, day] = dateStr.split('-');
            return `${day}/${month}/${year}`;
        }

        // ========== TOP / FLOP ==========

        // Variables globales pour Top/Flop
        let topData = [];
        let flopData = [];
        let showingAllTop = false;
        let showingAllFlop = false;

        // Charger les donn√©es Top/Flop au clic sur l'onglet
        function loadTopFlop() {
            fetch('/api/stats/top-flop')
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        topData = data.top;
                        flopData = data.flop;

                        // Afficher les 10 premiers par d√©faut
                        displayTop(false);
                        displayFlop(false);
                    } else {
                        alert('Erreur : ' + (data.message || 'Impossible de charger les donn√©es'));
                    }
                })
                .catch(error => {
                    alert('Erreur r√©seau : ' + error.message);
                });
        }

        // Afficher les num√©ros TOP
        function displayTop(showAll) {
            const grid = document.getElementById('top-grid');
            const dataToShow = showAll ? topData : topData.slice(0, 10);

            grid.innerHTML = '';

            dataToShow.forEach(item => {
                const card = document.createElement('div');
                card.className = 'number-card top';
                card.innerHTML = `
                    <div class="number">${item.number}</div>
                    <div class="count">${item.count} sorties</div>
                `;
                grid.appendChild(card);
            });
        }

        // Afficher les num√©ros FLOP
        function displayFlop(showAll) {
            const grid = document.getElementById('flop-grid');
            const dataToShow = showAll ? flopData : flopData.slice(0, 10);

            grid.innerHTML = '';

            dataToShow.forEach(item => {
                const card = document.createElement('div');
                card.className = 'number-card flop';
                card.innerHTML = `
                    <div class="number">${item.number}</div>
                    <div class="count">${item.count} sorties</div>
                `;
                grid.appendChild(card);
            });
        }

        // Toggle vue TOP (10 ou tous)
        function toggleTopView() {
            showingAllTop = !showingAllTop;
            displayTop(showingAllTop);

            const btn = document.getElementById('show-all-top');
            btn.textContent = showingAllTop ? 'Voir moins' : 'Voir tous les num√©ros';
        }

        // Toggle vue FLOP (10 ou tous)
        function toggleFlopView() {
            showingAllFlop = !showingAllFlop;
            displayFlop(showingAllFlop);

            const btn = document.getElementById('show-all-flop');
            btn.textContent = showingAllFlop ? 'Voir moins' : 'Voir tous les num√©ros';
        }

        // Modifier la fonction switchTab pour charger Top/Flop si n√©cessaire
        const originalSwitchTab = switchTab;
        function switchTab(tabName) {
            // D√©sactiver tous les onglets
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

            // Activer l'onglet s√©lectionn√©
            event.target.classList.add('active');
            document.getElementById(`tab-${tabName}`).classList.add('active');

            // Charger les donn√©es Top/Flop si c'est le premier acc√®s √† l'onglet
            if (tabName === 'topflop' && topData.length === 0) {
                loadTopFlop();
            }
        }
    </script>
    <script src="/ui/static/nav-scroll.js?v=1"></script>
    <script src="/ui/static/cookie-consent.js?v=7"></script>

    <!-- HYBRIDE Chatbot Widget -->
    <div id="hybride-chatbot-root"></div>
    <link rel="stylesheet" href="/ui/static/hybride-chatbot.css?v=4.3">
    <script src="/ui/static/hybride-chatbot.js?v=4.3"></script>
    <script src="/ui/static/version-inject.js"></script>
</body>
</html>
